@using Microsoft.AspNetCore.Identity.Data

@rendermode InteractiveServer
@page "/"


@inject IConfiguration Configuration
@inject mynydd.Services.DataStore DataStore


<PageTitle>Mynydd</PageTitle>

@if (_loggedIn)
{
    <InputTextArea @bind-Value="_text" />
}
else
{
    <input type="password" @onchange="OnKeyDown"/>
}   

@code {

    private bool _loggedIn = false;
    private string _text = string.Empty;

    private async Task OnKeyDown(ChangeEventArgs e)
    {
        if (e.Value?.ToString() == Configuration["Mynydd:LoginToken"])
        {
            _loggedIn = true;
        }        
    }
}